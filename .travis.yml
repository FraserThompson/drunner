language: cpp
sudo: required
dist: trusty
before_install:
   - sudo apt-get -qq update
   - sudo apt-get install -qq build-essential g++-multilib libboost-all-dev libyaml-cpp-dev
   - sudo apt-get install -qq apt-transport-https ca-certificates
   - sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D
   - sudo add-apt-repository ppa:
   - echo "deb https://apt.dockerproject.org/repo ubuntu-trusty main" | sudo tee -a /etc/apt/sources.list.d/docker.list
   - sudo apt-get -qq update
   - sudo apt-get install linux-image-extra-$(uname -r)
   - sudo apt-get purge -qq lxc-docker
   - sudo apt-get install -qq apparmor
   - sudo apt-get install -qq docker-engine
   - sudo service docker start
   - sudo docker run hello-world
   - sudo groupadd docker
   - sudo adduser $USER docker
   - newgrp docker && newgrp
script: 
   - make
   - make install
   - drunner unittest
   - drunner install drunner/dtest
   - dtest test
   - dtest test drunner/helloworld
   - dtest test drunner/minecraft
